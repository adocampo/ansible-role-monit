---

- name: Register Monit's Executable Location
  shell: 'command -v monit'
  register: _monit_exec
  failed_when: false

- set_fact:
  _monit_executable: "{{ _monit_exec.stdout | default('/usr/local/bin/monit') }}"
  cacheable: true

- include_vars: debian.yml
  when:  ansible_os_family == "Debian"

- include_vars: redhat.yml
  when: ansible_os_family == "RedHat"

- include_vars: macOS.yml
  when: ansible_os_family == "Darwin"

- include_tasks: autostart.yml
  tags: monit_autostart
  become: true

- include_tasks: config.yml
  tags: monit_config
  become: true

- include_tasks: monitors.yml
  tags: monit_monitors
  become: true
